<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>소셜네트워크 인덱스</title>
    <link rel="stylesheet" href="index.css" />
  </head>
  <body>
    <article id="519cbca7-ba2a-40a3-88ae-6a9777b3cbff" class="page sans">
      <header>
        <div class="page-header-icon undefined">
          <span class="icon">#️⃣</span>
        </div>
        <h1 class="page-title">소셜네트워크 인덱스</h1>
        <table class="properties">
          <tbody>
            <tr class="property-row property-row-multi_select">
              <th>
                <span class="icon property-icon">
                  <svg viewBox="0 0 16 16" class="typesMultipleSelect">
                    <path
                      d="M1.91602 4.83789C2.44238 4.83789 2.87305 4.40723 2.87305 3.87402C2.87305 3.34766 2.44238 2.91699 1.91602 2.91699C1.38281 2.91699 0.952148 3.34766 0.952148 3.87402C0.952148 4.40723 1.38281 4.83789 1.91602 4.83789ZM5.1084 4.52344H14.3984C14.7607 4.52344 15.0479 4.23633 15.0479 3.87402C15.0479 3.51172 14.7607 3.22461 14.3984 3.22461H5.1084C4.74609 3.22461 4.45898 3.51172 4.45898 3.87402C4.45898 4.23633 4.74609 4.52344 5.1084 4.52344ZM1.91602 9.03516C2.44238 9.03516 2.87305 8.60449 2.87305 8.07129C2.87305 7.54492 2.44238 7.11426 1.91602 7.11426C1.38281 7.11426 0.952148 7.54492 0.952148 8.07129C0.952148 8.60449 1.38281 9.03516 1.91602 9.03516ZM5.1084 8.7207H14.3984C14.7607 8.7207 15.0479 8.43359 15.0479 8.07129C15.0479 7.70898 14.7607 7.42188 14.3984 7.42188H5.1084C4.74609 7.42188 4.45898 7.70898 4.45898 8.07129C4.45898 8.43359 4.74609 8.7207 5.1084 8.7207ZM1.91602 13.2324C2.44238 13.2324 2.87305 12.8018 2.87305 12.2686C2.87305 11.7422 2.44238 11.3115 1.91602 11.3115C1.38281 11.3115 0.952148 11.7422 0.952148 12.2686C0.952148 12.8018 1.38281 13.2324 1.91602 13.2324ZM5.1084 12.918H14.3984C14.7607 12.918 15.0479 12.6309 15.0479 12.2686C15.0479 11.9062 14.7607 11.6191 14.3984 11.6191H5.1084C4.74609 11.6191 4.45898 11.9062 4.45898 12.2686C4.45898 12.6309 4.74609 12.918 5.1084 12.918Z"></path>
                  </svg>
                </span>
                Tags
              </th>
              <td>
                <span class="selected-value select-value-color-green">SNS</span>
              </td>
            </tr>
            <tr class="property-row property-row-multi_select">
              <th>
                <span class="icon property-icon">
                  <svg viewBox="0 0 16 16" class="typesMultipleSelect">
                    <path
                      d="M1.91602 4.83789C2.44238 4.83789 2.87305 4.40723 2.87305 3.87402C2.87305 3.34766 2.44238 2.91699 1.91602 2.91699C1.38281 2.91699 0.952148 3.34766 0.952148 3.87402C0.952148 4.40723 1.38281 4.83789 1.91602 4.83789ZM5.1084 4.52344H14.3984C14.7607 4.52344 15.0479 4.23633 15.0479 3.87402C15.0479 3.51172 14.7607 3.22461 14.3984 3.22461H5.1084C4.74609 3.22461 4.45898 3.51172 4.45898 3.87402C4.45898 4.23633 4.74609 4.52344 5.1084 4.52344ZM1.91602 9.03516C2.44238 9.03516 2.87305 8.60449 2.87305 8.07129C2.87305 7.54492 2.44238 7.11426 1.91602 7.11426C1.38281 7.11426 0.952148 7.54492 0.952148 8.07129C0.952148 8.60449 1.38281 9.03516 1.91602 9.03516ZM5.1084 8.7207H14.3984C14.7607 8.7207 15.0479 8.43359 15.0479 8.07129C15.0479 7.70898 14.7607 7.42188 14.3984 7.42188H5.1084C4.74609 7.42188 4.45898 7.70898 4.45898 8.07129C4.45898 8.43359 4.74609 8.7207 5.1084 8.7207ZM1.91602 13.2324C2.44238 13.2324 2.87305 12.8018 2.87305 12.2686C2.87305 11.7422 2.44238 11.3115 1.91602 11.3115C1.38281 11.3115 0.952148 11.7422 0.952148 12.2686C0.952148 12.8018 1.38281 13.2324 1.91602 13.2324ZM5.1084 12.918H14.3984C14.7607 12.918 15.0479 12.6309 15.0479 12.2686C15.0479 11.9062 14.7607 11.6191 14.3984 11.6191H5.1084C4.74609 11.6191 4.45898 11.9062 4.45898 12.2686C4.45898 12.6309 4.74609 12.918 5.1084 12.918Z"></path>
                  </svg>
                </span>
                Languages
              </th>
              <td>
                <span class="selected-value select-value-color-red"> Python</span>
              </td>
            </tr>
          </tbody>
        </table>
      </header>
      <div class="page-body">
        <h2 id="1fb4b9fa-96be-4af7-acdf-f80f5c80d903">목표로 하는 것</h2>
        <p id="cceb268b-b854-481d-9e08-eb7093f18df5" class="block-color-gray">What should be true after this project is implemented?</p>
        <ul id="81057620-0bb4-4d94-9cc1-eba89c4ed60a" class="bulleted-list">
          <li></li>
        </ul>
        <h2 id="5669c2ad-9b67-4767-8948-4ede50335f8e">목표가 아닌 것</h2>
        <p id="43d528f0-10e6-4bc1-b958-c7706310435c" class="block-color-gray">What is explicitly not in scope and why?</p>
        <ul id="3e0d23ea-029d-46a1-92b2-e1d675434175" class="bulleted-list">
          <li></li>
        </ul>
        <h2 id="5f25b3ee-ce9a-41d7-a276-d47bc1641864">데이터 모델 구조</h2>
        <pre id="a7a51354-f25d-48f7-9e89-5e9c4b69a556" class="code">
        <code>
                    classDiagram
class SocialMediaRating {
  +company: Company
  +artist: Artist
  +YOUTUBE_URL: URL
  +TWITTER_URL: URL
  +bladeYoutube: URL
  +bladeTwitter: URL
  +TWITTER_ID: string
  +TWITTER_NAME: string
  +t_followers: Int
  +t_following: Int
  +t_tweets: Int
}

</code>
</pre>
        <h2 id="d5971018-07fa-47dc-ad98-8c334e5dcddc">깃허브 코드 (git)</h2>
        <hr id="51586838-7309-4bbe-a08a-5f9148e5b8fc" />
        <figure id="d9015a52-e580-47dd-ac27-fc52eab841ba">
          <a href="https://github.com/AndrewDongminYoo/Serverless-Framework-Crawlers/blob/main/social-count/youtube.py" class="bookmark source">
            <div class="bookmark-info">
              <div class="bookmark-text">
                <div class="bookmark-title">Serverless-Framework-Crawlers/youtube.py at main · AndrewDongminYoo/Serverless-Framework-Crawlers</div>
                <div class="bookmark-description">
                  Serverless Framework를 활용해 AWS Lambda Crawler 만들기. Contribute to AndrewDongminYoo/Serverless-Framework-Crawlers development by creating an account on GitHub.
                </div>
              </div>
              <div class="bookmark-href">
                <img src="https://github.com/fluidicon.png" class="icon bookmark-icon" />
                https://github.com/AndrewDongminYoo/Serverless-Framework-Crawlers/blob/main/social-count/youtube.py
              </div>
            </div>
            <img src="https://opengraph.githubassets.com/f418c4b35727724a15c3c5ca393007b895e66cf11c32c9656ab50f99a32fc168/AndrewDongminYoo/Serverless-Framework-Crawlers" class="bookmark-image" />
          </a>
        </figure>
        <ul id="403a8650-5075-48bf-bf8f-fcc423379ce0" class="toggle">
          <li>
            <details open="">
              <summary>
                <a href="https://github.com/AndrewDongminYoo/Serverless-Framework-Crawlers/blob/main/social-count/youtube.py"> youtube.py</a>
              </summary>
              <pre id="f57b7298-7a57-4d2d-8416-dce719c63b2c" class="code">
              <code>
                                      from googleapiclient.discovery import build
from googleapiclient.errors import HttpError
import argparse
from dotenv import load_dotenv
import os

load_dotenv()
DEVELOPER_KEY = os.environ[&quot;YOUTUBE_API_KEY&quot;]
YOUTUBE_API_SERVICE_NAME = &quot;youtube&quot;
YOUTUBE_API_VERSION = &quot;v3&quot;


def get_youtube_response(options, api_type):
    youtube = build(
        YOUTUBE_API_SERVICE_NAME,
        YOUTUBE_API_VERSION, developerKey=DEVELOPER_KEY
    )
    if api_type == &quot;search&quot;:
        return youtube.search().list( q=options.q, part=&quot;id,snippet&quot;, maxResults=options.max_results
        ).execute()
    elif api_type == &quot;channels&quot;:
        return youtube.channels().list( id=options.id, part=&quot;statistics&quot;, maxResults=options.max_results
        ).execute()


def search_all(options):
    search_response = get_youtube_response(options, &quot;search&quot;)
    videos = []
    channels = []
    playlists = []
    for search_result in search_response.get(&quot;items&quot;, []):
        if search_result[&quot;id&quot;][&quot;kind&quot;] == &quot;youtube#video&quot;:
            videos.append(f&quot;{search_result[&#x27;snippet&#x27;][&#x27;title&#x27;]} ({search_result[&#x27;id&#x27;][&#x27;videoId&#x27;]}) : (채널명 {search_result[&#x27;snippet&#x27;][&#x27;channelTitle&#x27;]})&quot;)
        elif search_result[&quot;id&quot;][&quot;kind&quot;] == &quot;youtube#channel&quot;:
            channels.append(f&quot;{search_result[&#x27;snippet&#x27;][&#x27;title&#x27;]} ({search_result[&#x27;id&#x27;][&#x27;channelId&#x27;]}) : (채널명 {search_result[&#x27;snippet&#x27;][&#x27;channelTitle&#x27;]})&quot;)
        elif search_result[&quot;id&quot;][&quot;kind&quot;] == &quot;youtube#playlist&quot;:
            playlists.append(f&quot;{search_result[&#x27;snippet&#x27;][&#x27;title&#x27;]} ({search_result[&#x27;id&#x27;][&#x27;playlistId&#x27;]}) : (채널명 {search_result[&#x27;snippet&#x27;][&#x27;channelTitle&#x27;]})&quot;)
    return dict(videos=videos, channels=channels, playlists=playlists)


def get_channel_id(options):
    search_response = get_youtube_response(options, &quot;search&quot;)
    for search_result in search_response.get(&quot;items&quot;, []):
        if search_result[&quot;id&quot;][&quot;kind&quot;] == &quot;youtube#channel&quot;:
            if search_result[&quot;snippet&quot;][&quot;title&quot;] == options.q:
                return search_result[&quot;snippet&quot;][&quot;channelId&quot;]


def youtube_search(options):
    search_response = get_youtube_response(options, &quot;channels&quot;)
    for search_result in search_response.get(&quot;items&quot;, []):
        if search_result[&quot;kind&quot;] == &quot;youtube#channel&quot;:
            if search_result[&quot;id&quot;] == options.id:
                return search_result[&quot;statistics&quot;]


def youtube_query(query, service):
    arg_parser = argparse.ArgumentParser(description=&quot;create argument namespace&quot;)
    arg_parser.add_argument(&quot;--max-results&quot;, help=&quot;Max results&quot;, default=100)
    arg_parser.add_argument(&quot;--id&quot;, help=&quot;Channel Id&quot;, default=query)
    arg_parser.add_argument(&quot;--q&quot;, help=&quot;Search term&quot;, default=query)
    args = arg_parser.parse_args()
    try:
        if service == &quot;list-channels&quot;:
            return youtube_search(args)
        elif service == &quot;channel-id&quot;:
            return get_channel_id(args)
        elif service == &quot;search-all&quot;:
            return search_all(args)
    except HttpError as e:
        print(&quot;An HTTP error %d occurred:\n%s&quot; % (e.resp.status, e.content))</code>
        </pre>
            </details>
          </li>
        </ul>
        <figure id="af646be8-75ef-4aee-a121-b7f7bfa94147">
          <a href="https://github.com/AndrewDongminYoo/Serverless-Framework-Crawlers/blob/main/social-count/twitter.py" class="bookmark source">
            <div class="bookmark-info">
              <div class="bookmark-text">
                <div class="bookmark-title">Serverless-Framework-Crawlers/twitter.py at main · AndrewDongminYoo/Serverless-Framework-Crawlers</div>
                <div class="bookmark-description">
                  Serverless Framework를 활용해 AWS Lambda Crawler 만들기. Contribute to AndrewDongminYoo/Serverless-Framework-Crawlers development by creating an account on GitHub.
                </div>
              </div>
              <div class="bookmark-href">
                <img src="https://github.com/fluidicon.png" class="icon bookmark-icon" />
                https://github.com/AndrewDongminYoo/Serverless-Framework-Crawlers/blob/main/social-count/twitter.py
              </div>
            </div>
            <img src="https://opengraph.githubassets.com/f418c4b35727724a15c3c5ca393007b895e66cf11c32c9656ab50f99a32fc168/AndrewDongminYoo/Serverless-Framework-Crawlers" class="bookmark-image" />
          </a>
        </figure>
        <ul id="0403ac6f-376d-44ee-97b0-4e85820a7dd2" class="toggle">
          <li>
            <details open="">
              <summary>
                <a href="https://github.com/AndrewDongminYoo/Serverless-Framework-Crawlers/blob/main/social-count/twitter.py"> twitter.py</a>
              </summary>
              <pre id="ec2b8e1e-e899-4f28-814b-971f9cbfe245" class="code">
              <code>
                                      import requests
import os
from urllib.parse import quote
from dotenv import load_dotenv

load_dotenv()
bearer_token = os.environ.get(&quot;TWITTER_BEARER_TOKEN&quot;)


def create_url(query: str, service: str):
    if service == &quot;get-user-id&quot;:
        path = f&quot;by/username/{quote(query)}&quot;
    if service == &quot;user&quot;:
        path = f&quot;by/?usernames=TwitterDev,TwitterAPI&amp;user.fields=description,created_at&quot;
    elif service == &quot;followers&quot;:
        path = f&quot;{query}?user.fields=public_metrics&quot;
    url = f&quot;https://api.twitter.com/2/users/{path}&quot;
    return url


def bearer_oauth(r):
    &quot;&quot;&quot;
    Method required by bearer token authentication.
    &quot;&quot;&quot;
    r.headers[&quot;Authorization&quot;] = f&quot;Bearer {bearer_token}&quot;
    r.headers[&quot;User-Agent&quot;] = &quot;v2UserLookupPython&quot;
    return r


def connect_to_endpoint(url):
    response = requests.request(&quot;GET&quot;, url, auth=bearer_oauth)
    if response.status_code != 200:
        raise Exception(
            &quot;Request returned an error: {} {}&quot;.format(
                response.status_code, response.text
            )
        )
    return response.json()


def change_to_id(twitter_name):
    url = create_url(twitter_name, &quot;get-user-id&quot;)
    json_response = connect_to_endpoint(url)
    try:
        return json_response[&quot;data&quot;][&quot;id&quot;]
    except KeyError:
        print(json_response)
    except TypeError:
        print(json_response)


def get_public_metrics(twitter_id):
    url = create_url(twitter_id, &quot;followers&quot;)
    json_response = connect_to_endpoint(url)
    try:
        return json_response[&quot;data&quot;][&quot;public_metrics&quot;]
    except KeyError:
        print(json_response)
    except TypeError:
        print(json_response)</code>
        </pre>
              <p id="2a43c991-a066-40a1-ba33-e9b34746e61e"></p>
            </details>
          </li>
        </ul>
        <h2 id="044bb8c0-8a5a-4a58-b9f7-218395a57aeb">결과물 테이블 (csv or db)</h2>
        <hr id="79386f9c-57cc-4d8d-8b67-cf28f3db0c02" />
        <figure id="338c6c1d-2003-48c9-a594-7861d104ffab" class="link-to-page"></figure>
        <figure id="075efa79-9980-484b-9f6b-c4c6ea753483" class="link-to-page"></figure>
      </div>
    </article>
  </body>
</html>
